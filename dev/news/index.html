<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • httr2</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://httr2.r-lib.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="httr2.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">httr2</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.1.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/httr2.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/wrapping-apis.html">Wrapping APIs</a></li>
    <li><a class="dropdown-item" href="../articles/oauth.html">OAuth</a></li>
  </ul></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2025/01/httr2-1-1-0/">httr2 1.1.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2023/11/httr2-1-0-0/">httr2 1.0.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/httr2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/r-lib/httr2/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="httr2-development-version">httr2 (development version)<a class="anchor" aria-label="anchor" href="#httr2-development-version"></a></h2>
<div class="section level3">
<h3 id="lifecycle-changes-development-version">Lifecycle changes<a class="anchor" aria-label="anchor" href="#lifecycle-changes-development-version"></a></h3>
<ul><li><p><code><a href="../reference/req_perform_stream.html">req_perform_stream()</a></code> has been soft deprecated in favour of <code><a href="../reference/req_perform_connection.html">req_perform_connection()</a></code>.</p></li>
<li><p>Deprecated functions <code>mutli_req_perform()</code>, <code>req_stream()</code>, <code>with_mock()</code> and <code>local_mock()</code> have been removed.</p></li>
<li><p>Deprecated arguments <code>req_perform_parallel(pool)</code>, <code>req_oauth_auth_code(host_name, host_ip, port)</code>, and <code>oauth_flow_auth_code(host_name, host_ip, port)</code> have been removed.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-development-version">New features<a class="anchor" aria-label="anchor" href="#new-features-development-version"></a></h3>
<ul><li><p>Redacted headers are no longer serialized to disk. This is important since it makes it harder to accidentally leak secrets to files on disk, but comes at a cost: you can longer perform such requests that have been saved and reloaded (<a href="https://github.com/r-lib/httr2/issues/721" class="external-link">#721</a>).</p></li>
<li><p>URL construction is now powered by <code><a href="https://jeroen.r-universe.dev/curl/reference/curl_parse_url.html" class="external-link">curl::curl_modify_url()</a></code>, and hence now (correctly) escapes the <code>path</code> component (<a href="https://github.com/r-lib/httr2/issues/732" class="external-link">#732</a>). This means that <code><a href="../reference/req_url.html">req_url_path()</a></code> now can only affect the path component of the URL, not the query params or fragment.</p></li>
<li><p>New <code><a href="../reference/last_response.html">last_request_json()</a></code> and <code><a href="../reference/last_response.html">last_response_json()</a></code> to conveniently see JSON bodies (<a href="https://github.com/r-lib/httr2/issues/734" class="external-link">#734</a>).</p></li>
<li><p>New <code><a href="../reference/req_get_method.html">req_get_method()</a></code>, <code><a href="../reference/req_get_headers.html">req_get_headers()</a></code>, <code>req_body_get_type()</code>, <code><a href="../reference/req_get_body_type.html">req_get_body()</a></code> allow you to introspect a request object (<a href="https://github.com/r-lib/httr2/issues/718" class="external-link">#718</a>).</p></li>
<li><p>New <code><a href="../reference/resp_timing.html">resp_timing()</a></code> exposes timing information about the request measured by libcurl (<a href="https://github.com/arcresu" class="external-link">@arcresu</a>, <a href="https://github.com/r-lib/httr2/issues/725" class="external-link">#725</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-bug-fixues-development-version">Minor improvements bug fixues<a class="anchor" aria-label="anchor" href="#minor-improvements-bug-fixues-development-version"></a></h3>
<ul><li><p>Functions that capture interrutps (like <code><a href="../reference/req_perform_parallel.html">req_perform_parallel()</a></code> and friends) are now easier to escape if they’re called inside a loop: you can press Ctrl + C twice to guarantee an exit (<a href="https://github.com/r-lib/httr2/issues/1810" class="external-link">#1810</a>).</p></li>
<li><p><code><a href="../reference/req_perform_iterative.html">req_perform_iterative()</a></code>, <code><a href="../reference/req_perform_sequential.html">req_perform_sequential()</a></code>, <code><a href="../reference/req_perform_parallel.html">req_perform_parallel()</a></code>, <code><a href="../reference/req_perform_promise.html">req_perform_promise()</a></code>, and <code><a href="../reference/req_perform_connection.html">req_perform_connection()</a></code> now support mocking (<a href="https://github.com/r-lib/httr2/issues/651" class="external-link">#651</a>). To mock the response from <code><a href="../reference/req_perform_connection.html">req_perform_connection()</a></code> create a response with the new <code>StreamingBody</code> for a body.</p></li>
<li><p><code><a href="../reference/new_response.html">new_response()</a></code> is now exported (<a href="https://github.com/r-lib/httr2/issues/751" class="external-link">#751</a>).</p></li>
<li><p><code><a href="../reference/req_body.html">req_body_json()</a></code> and <code><a href="../reference/req_body.html">req_body_form()</a></code> correctly unobfuscated inputs, as documented (<a href="https://github.com/r-lib/httr2/issues/754" class="external-link">#754</a>).</p></li>
<li><p><code><a href="../reference/req_body.html">req_body_json_modify()</a></code> can now be used on a request with an empty body.</p></li>
<li><p><code><a href="../reference/req_error.html">req_error()</a></code> errors with long bodies are now correctly wrapped (<a href="https://github.com/r-lib/httr2/issues/727" class="external-link">#727</a>).</p></li>
<li><p><code><a href="../reference/req_oauth_device.html">req_oauth_device()</a></code> gains an <code>open_browser</code> argument that lets you take control of whether a browser is opened or the URL is printed (<a href="https://github.com/plietar" class="external-link">@plietar</a>, <a href="https://github.com/r-lib/httr2/issues/763" class="external-link">#763</a>)</p></li>
<li><p><code><a href="../reference/req_perform_parallel.html">req_perform_parallel()</a></code> handles <code>progress</code> argument consistently with other functions (<a href="https://github.com/r-lib/httr2/issues/726" class="external-link">#726</a>).</p></li>
<li><p><code><a href="../reference/req_url.html">req_url_query()</a></code> now re-calculates n lengths when using <code>.multi = "explode"</code> to avoid select/recycling issues (<a href="https://github.com/Kevanness" class="external-link">@Kevanness</a>, <a href="https://github.com/r-lib/httr2/issues/719" class="external-link">#719</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.2" id="httr2-112">httr2 1.1.2<a class="anchor" aria-label="anchor" href="#httr2-112"></a></h2><p class="text-muted">CRAN release: 2025-03-26</p>
<ul><li>
<code><a href="../reference/req_headers.html">req_headers()</a></code> more carefully checks its input types (<a href="https://github.com/r-lib/httr2/issues/707" class="external-link">#707</a>).</li>
<li>Fix AWS request signing due to <code>argument 'cache' is missing</code> error (<a href="https://github.com/r-lib/httr2/issues/706" class="external-link">#706</a>, <a href="https://github.com/jcheng5" class="external-link">@jcheng5</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.1" id="httr2-111">httr2 1.1.1<a class="anchor" aria-label="anchor" href="#httr2-111"></a></h2><p class="text-muted">CRAN release: 2025-03-08</p>
<div class="section level3">
<h3 id="new-features-1-1-1">New features<a class="anchor" aria-label="anchor" href="#new-features-1-1-1"></a></h3>
<ul><li>
<code><a href="../reference/req_perform_parallel.html">req_perform_parallel()</a></code> lifts many of the previous restrictions. It supports simplified versions of <code><a href="../reference/req_throttle.html">req_throttle()</a></code> and <code><a href="../reference/req_retry.html">req_retry()</a></code>, can refresh OAuth tokens, and checks the cache before/after each request. (<a href="https://github.com/r-lib/httr2/issues/681" class="external-link">#681</a>).</li>
<li>Default verbosity can be controlled by the <code>HTTR2_VERBOSITY</code> environment variable (<a href="https://github.com/r-lib/httr2/issues/687" class="external-link">#687</a>).</li>
<li>
<code><a href="../reference/with_verbosity.html">local_verbosity()</a></code> matches the existing <code><a href="../reference/with_verbosity.html">with_verbosity()</a></code> and allows for local control of verbosity (<a href="https://github.com/r-lib/httr2/issues/687" class="external-link">#687</a>).</li>
<li>
<code><a href="../reference/req_dry_run.html">req_dry_run()</a></code> and <code><a href="../reference/req_verbose.html">req_verbose()</a></code> display compressed correctly (<a href="https://github.com/r-lib/httr2/issues/91" class="external-link">#91</a>, <a href="https://github.com/r-lib/httr2/issues/656" class="external-link">#656</a>) and automatically prettify JSON bodies (<a href="https://github.com/r-lib/httr2/issues/668" class="external-link">#668</a>). You can suppress prettification with <code>options(httr2_pretty_json = FALSE)</code> (<a href="https://github.com/r-lib/httr2/issues/668" class="external-link">#668</a>).</li>
<li>
<code><a href="../reference/req_throttle.html">req_throttle()</a></code> implements a new “token bucket” algorithm that maintains average rate limits while allowing bursts of higher request rates.</li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-1-1-1">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-1-1-1"></a></h3>
<ul><li>
<code>aws_v4_signature()</code> correctly processes URLs containing query parameters (<a href="https://github.com/jeffreyzuber" class="external-link">@jeffreyzuber</a>, <a href="https://github.com/r-lib/httr2/issues/645" class="external-link">#645</a>).</li>
<li>
<code><a href="../reference/oauth_client.html">oauth_client()</a></code> and <code><a href="../reference/oauth_token.html">oauth_token()</a></code> implement improved print methods with bulleted lists, similar to other httr2 objects, and <code><a href="../reference/oauth_client.html">oauth_client()</a></code> with custom <code>auth</code> functions no longer produces errors (<a href="https://github.com/r-lib/httr2/issues/648" class="external-link">#648</a>).</li>
<li>
<code><a href="../reference/req_dry_run.html">req_dry_run()</a></code> omits headers that would vary in tests and can prettify JSON output.</li>
<li>
<code><a href="../reference/req_headers.html">req_headers()</a></code> automatically redacts <code>Authorization</code> headers (<a href="https://github.com/r-lib/httr2/issues/649" class="external-link">#649</a>) and correctly implements case-insensitive modification of existing headers (<a href="https://github.com/r-lib/httr2/issues/682" class="external-link">#682</a>).</li>
<li>
<code><a href="../reference/req_headers.html">req_headers_redacted()</a></code> now supports dynamic dots (<a href="https://github.com/r-lib/httr2/issues/647" class="external-link">#647</a>).</li>
<li>
<code><a href="../reference/req_oauth_auth_code.html">req_oauth_auth_code()</a></code> no longer adds trailing “/” characters to properly formed <code>redirect_uri</code> values (<a href="https://github.com/jonthegeek" class="external-link">@jonthegeek</a>, <a href="https://github.com/r-lib/httr2/issues/646" class="external-link">#646</a>).</li>
<li>
<code><a href="../reference/req_perform_connection.html">req_perform_connection()</a></code> produces more helpful error messages when requests fail at the networking level.</li>
<li>
<code>req_perform_parallel(pool)</code> now is deprecated in favour of a new <code>max_active</code> argument (<a href="https://github.com/r-lib/httr2/issues/681" class="external-link">#681</a>).</li>
<li>
<code><a href="../reference/req_user_agent.html">req_user_agent()</a></code> memoizes the default user agent to improve performance, as computing version numbers is relatively slow (300 µs).</li>
<li>
<code><a href="../reference/resp_link_url.html">resp_link_url()</a></code> once again respects the case insensitivity for header names (<a href="https://github.com/DavidRLovell" class="external-link">@DavidRLovell</a>, <a href="https://github.com/r-lib/httr2/issues/655" class="external-link">#655</a>).</li>
<li>
<code><a href="../reference/resp_stream_raw.html">resp_stream_sse()</a></code> automatically retrieves the next event when the current event contains no data, and returns data as a single string (<a href="https://github.com/r-lib/httr2/issues/650" class="external-link">#650</a>).</li>
<li>
<code><a href="https://rdrr.io/r/utils/str.html" class="external-link">str()</a></code> correctly redacts redacted headers (<a href="https://github.com/r-lib/httr2/issues/682" class="external-link">#682</a>).</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.0" id="httr2-110">httr2 1.1.0<a class="anchor" aria-label="anchor" href="#httr2-110"></a></h2><p class="text-muted">CRAN release: 2025-01-18</p>
<div class="section level3">
<h3 id="lifecycle-changes-1-1-0">Lifecycle changes<a class="anchor" aria-label="anchor" href="#lifecycle-changes-1-1-0"></a></h3>
<ul><li><p><code><a href="../reference/req_perform_stream.html">req_perform_stream()</a></code> is superseded in favor of <code><a href="../reference/req_perform_connection.html">req_perform_connection()</a></code>, which is no longer experimental (<a href="https://github.com/r-lib/httr2/issues/625" class="external-link">#625</a>).</p></li>
<li><p><code>with_mock()</code> and <code>local_mock()</code> are defunct and will be removed in the next release.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-1-0">New features<a class="anchor" aria-label="anchor" href="#new-features-1-1-0"></a></h3>
<ul><li><p><code><a href="../reference/is_online.html">is_online()</a></code> wraps <code><a href="https://jeroen.r-universe.dev/curl/reference/nslookup.html" class="external-link">curl::has_internet()</a></code>, making it easy to tell if you’re currently online (<a href="https://github.com/r-lib/httr2/issues/512" class="external-link">#512</a>).</p></li>
<li><p><code><a href="../reference/req_headers.html">req_headers_redacted()</a></code> makes it easier to redact sensitive headers (<a href="https://github.com/r-lib/httr2/issues/561" class="external-link">#561</a>).</p></li>
<li><p><code><a href="../reference/req_retry.html">req_retry()</a></code> implements “circuit breaking”, which immediatelys error after multiple failures to the same server (e.g. because the server is down) (<a href="https://github.com/r-lib/httr2/issues/370" class="external-link">#370</a>).</p></li>
<li><p><code><a href="../reference/req_url.html">req_url_relative()</a></code> navigates to a relative URL (<a href="https://github.com/r-lib/httr2/issues/449" class="external-link">#449</a>).</p></li>
<li><p><code><a href="../reference/resp_request.html">resp_request()</a></code> returns the request associated with a response; this can be useful when debugging (<a href="https://github.com/r-lib/httr2/issues/604" class="external-link">#604</a>).</p></li>
<li><p><code><a href="../reference/resp_stream_raw.html">resp_stream_is_complete()</a></code> checks if data remains in the stream (<a href="https://github.com/r-lib/httr2/issues/559" class="external-link">#559</a>).</p></li>
<li><p><code><a href="../reference/url_modify.html">url_modify()</a></code>, <code><a href="../reference/url_modify.html">url_modify_query()</a></code>, and <code><a href="../reference/url_modify.html">url_modify_relative()</a></code> modify URLs (<a href="https://github.com/r-lib/httr2/issues/464" class="external-link">#464</a>); <code><a href="../reference/url_query_parse.html">url_query_parse()</a></code> and <code><a href="../reference/url_query_parse.html">url_query_build()</a></code> parse and build query strings (<a href="https://github.com/r-lib/httr2/issues/425" class="external-link">#425</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-and-minor-improvements-1-1-0">Bug fixes and minor improvements<a class="anchor" aria-label="anchor" href="#bug-fixes-and-minor-improvements-1-1-0"></a></h3>
<ul><li><p>OAuth response parsing errors now have a dedicated <code>httr2_oauth_parse</code> error class that includes the original response object (<a href="https://github.com/atheriel" class="external-link">@atheriel</a>, <a href="https://github.com/r-lib/httr2/issues/596" class="external-link">#596</a>).</p></li>
<li><p><code><a href="../reference/curl_translate.html">curl_translate()</a></code> converts cookie headers to <code><a href="../reference/req_cookie_preserve.html">req_cookies_set()</a></code> (<a href="https://github.com/r-lib/httr2/issues/431" class="external-link">#431</a>) and JSON data to <code><a href="../reference/req_body.html">req_body_json_modify()</a></code> calls (<a href="https://github.com/r-lib/httr2/issues/258" class="external-link">#258</a>).</p></li>
<li><p><code>print.request()</code> escapes <code><a href="https://rdrr.io/r/base/Paren.html" class="external-link">{}</a></code> in headers (<a href="https://github.com/r-lib/httr2/issues/586" class="external-link">#586</a>).</p></li>
<li><p><code><a href="../reference/req_auth_aws_v4.html">req_auth_aws_v4()</a></code> formats the AWS Authorization header correctly (<a href="https://github.com/r-lib/httr2/issues/627" class="external-link">#627</a>).</p></li>
<li><p><code><a href="../reference/req_retry.html">req_retry()</a></code> defaults to <code>max_tries = 2</code> when nethier <code>max_tries</code> nor <code>max_seconds</code> is set. If you want to disable retries, set <code>max_tries = 1</code>.</p></li>
<li><p><code><a href="../reference/req_perform_connection.html">req_perform_connection()</a></code> gains a <code>verbosity</code> argument, which is useful for understanding exactly how data is streamed back to you (<a href="https://github.com/r-lib/httr2/issues/599" class="external-link">#599</a>). <code><a href="../reference/req_perform_promise.html">req_perform_promise()</a></code> also gains a <code>verbosity</code> argument.</p></li>
<li><p><code><a href="../reference/req_url.html">req_url_query()</a></code> can control how spaces are encoded with <code>.space</code> (<a href="https://github.com/r-lib/httr2/issues/432" class="external-link">#432</a>).</p></li>
<li><p><code><a href="../reference/resp_link_url.html">resp_link_url()</a></code> handles multiple <code>Link</code> headers (<a href="https://github.com/r-lib/httr2/issues/587" class="external-link">#587</a>).</p></li>
<li><p><code><a href="../reference/resp_stream_raw.html">resp_stream_sse()</a></code> will warn if it recieves a partial event.</p></li>
<li><p><code><a href="../reference/url_parse.html">url_parse()</a></code> parses relative URLs with new <code>base_url</code> argument (<a href="https://github.com/r-lib/httr2/issues/449" class="external-link">#449</a>) and the uses faster and more correct <code><a href="https://jeroen.r-universe.dev/curl/reference/curl_parse_url.html" class="external-link">curl::curl_parse_url()</a></code> (<a href="https://github.com/r-lib/httr2/issues/577" class="external-link">#577</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.7" id="httr2-107">httr2 1.0.7<a class="anchor" aria-label="anchor" href="#httr2-107"></a></h2><p class="text-muted">CRAN release: 2024-11-26</p>
<ul><li>
<code><a href="../reference/req_perform_promise.html">req_perform_promise()</a></code> upgraded to use event-driven async based on waiting efficiently on curl socket activity (<a href="https://github.com/r-lib/httr2/issues/579" class="external-link">#579</a>).</li>
<li>New <code><a href="../reference/req_oauth_token_exchange.html">req_oauth_token_exchange()</a></code> and <code><a href="../reference/req_oauth_token_exchange.html">oauth_flow_token_exchange()</a></code> functions implement the OAuth token exchange protocol from RFC 8693 (<a href="https://github.com/atheriel" class="external-link">@atheriel</a>, <a href="https://github.com/r-lib/httr2/issues/460" class="external-link">#460</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.6" id="httr2-106">httr2 1.0.6<a class="anchor" aria-label="anchor" href="#httr2-106"></a></h2><p class="text-muted">CRAN release: 2024-11-04</p>
<ul><li>Fix stochastic test failure, particularly on CRAN (<a href="https://github.com/r-lib/httr2/issues/572" class="external-link">#572</a>)</li>
<li>New <code><a href="../reference/oauth_cache_clear.html">oauth_cache_clear()</a></code> is an exported end point to clear the OAuth cache.</li>
<li>New <code><a href="../reference/req_auth_aws_v4.html">req_auth_aws_v4()</a></code> signs request using AWS’s special format (<a href="https://github.com/r-lib/httr2/issues/562" class="external-link">#562</a>, <a href="https://github.com/r-lib/httr2/issues/566" class="external-link">#566</a>).</li>
<li>
<code><a href="../reference/req_cache.html">req_cache()</a></code> no longer retrieves anything but <code>GET</code> requests from the cache.</li>
<li>New <code><a href="../reference/resp_stream_raw.html">resp_stream_aws()</a></code> to retrieve AWS’s special streaming format. With thanks to <a href="https://github.com/lifion/lifion-aws-event-stream/" class="external-link uri">https://github.com/lifion/lifion-aws-event-stream/</a> for a simple reference implementation.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.5" id="httr2-105">httr2 1.0.5<a class="anchor" aria-label="anchor" href="#httr2-105"></a></h2><p class="text-muted">CRAN release: 2024-09-26</p>
<ul><li>
<code><a href="../reference/req_perform_parallel.html">req_perform_parallel()</a></code> and <code><a href="../reference/req_perform_promise.html">req_perform_promise()</a></code> now correctly set up the method and body (<a href="https://github.com/r-lib/httr2/issues/549" class="external-link">#549</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.4" id="httr2-104">httr2 1.0.4<a class="anchor" aria-label="anchor" href="#httr2-104"></a></h2><p class="text-muted">CRAN release: 2024-09-13</p>
<ul><li>
<code><a href="../reference/req_body.html">req_body_file()</a></code> now works with files &gt;64kb once more (<a href="https://github.com/r-lib/httr2/issues/524" class="external-link">#524</a>) and no longer leaks a connection if the response doesn’t complete succesfully (<a href="https://github.com/r-lib/httr2/issues/534" class="external-link">#534</a>).</li>
<li>
<code>req_body_*()</code> now give informative error if you attempt to change the body type (<a href="https://github.com/r-lib/httr2/issues/451" class="external-link">#451</a>).</li>
<li>
<code><a href="../reference/req_cache.html">req_cache()</a></code> now re-caches the response if the body is hasn’t been modified but the headers have changed (<a href="https://github.com/r-lib/httr2/issues/442" class="external-link">#442</a>). It also works better when <code><a href="../reference/req_perform.html">req_perform()</a></code> sets a path (<a href="https://github.com/r-lib/httr2/issues/442" class="external-link">#442</a>).</li>
<li>New <code>req_cookie_set()</code> allows you to set client side cookies (<a href="https://github.com/r-lib/httr2/issues/369" class="external-link">#369</a>).</li>
<li>
<code><a href="../reference/req_perform.html">req_perform()</a></code> no longer displays a progress bar when sleeping during tests. You can override this behaviour by setting the option <code>httr2_progress</code>.</li>
<li>
<code><a href="../reference/req_perform_iterative.html">req_perform_iterative()</a></code> is no longer experimental.</li>
<li>New <code><a href="../reference/req_perform_connection.html">req_perform_connection()</a></code> for working with streaming data. Unlike <code><a href="../reference/req_perform_stream.html">req_perform_stream()</a></code> which uses callbacks, <code><a href="../reference/req_perform_connection.html">req_perform_connection()</a></code> returns a regular response object with a connection as the body. Unlike <code><a href="../reference/req_perform_stream.html">req_perform_stream()</a></code> it supports <code><a href="../reference/req_retry.html">req_retry()</a></code> (with <a href="https://github.com/jcheng5" class="external-link">@jcheng5</a>, <a href="https://github.com/r-lib/httr2/issues/519" class="external-link">#519</a>).</li>
<li>
<code><a href="../reference/req_retry.html">req_retry()</a></code> no longer treates low-level HTTP failures the same way as transient errors by default. You can return to the previous behaviour with <code>retry_on_error = TRUE</code>.</li>
<li>
<code><a href="../reference/resp_body_raw.html">resp_body_html()</a></code> and <code><a href="../reference/resp_body_raw.html">resp_body_xml()</a></code> now work when <code><a href="../reference/req_perform.html">req_perform()</a></code> is given a path (<a href="https://github.com/r-lib/httr2/issues/448" class="external-link">#448</a>).</li>
<li>New <code>resp_stream_bytes()</code>, <code><a href="../reference/resp_stream_raw.html">resp_stream_lines()</a></code>, and <code><a href="../reference/resp_stream_raw.html">resp_stream_sse()</a></code> for streaming chunk from a connection response (<a href="https://github.com/r-lib/httr2/issues/519" class="external-link">#519</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.3" id="httr2-103">httr2 1.0.3<a class="anchor" aria-label="anchor" href="#httr2-103"></a></h2><p class="text-muted">CRAN release: 2024-08-22</p>
<ul><li><p><code><a href="../reference/jwt_claim.html">jwt_encode_hmac()</a></code> now calls correct underlying function <code><a href="https://r-lib.r-universe.dev/jose/reference/jwt_encode.html" class="external-link">jose::jwt_encode_hmac()</a></code> and has correct default size parameter value (<a href="https://github.com/denskh" class="external-link">@denskh</a>, <a href="https://github.com/r-lib/httr2/issues/508" class="external-link">#508</a>).</p></li>
<li><p><code><a href="../reference/req_cache.html">req_cache()</a></code> now prunes cache <em>before</em> checking if a given key exists, eliminating the occassional error about reading from an invalid RDS file. It also no longer tests for existence then later reads the cache, avoiding potential race conditions.</p></li>
<li><p>New <code><a href="../reference/req_perform_promise.html">req_perform_promise()</a></code> creates a <code><a href="https://rstudio.github.io/promises/reference/promise.html" class="external-link">promises::promise</a></code> so a request can run in the background (<a href="https://github.com/r-lib/httr2/issues/501" class="external-link">#501</a>, <a href="https://github.com/gergness" class="external-link">@gergness</a>).</p></li>
<li><p><code><a href="../reference/req_perform_parallel.html">req_perform_parallel()</a></code> now respects error handling in <code><a href="../reference/req_error.html">req_error()</a></code>.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.2" id="httr2-102">httr2 1.0.2<a class="anchor" aria-label="anchor" href="#httr2-102"></a></h2><p class="text-muted">CRAN release: 2024-07-16</p>
<ul><li>
<code><a href="../reference/req_body.html">req_body_file()</a></code> now only opens a connection when the request actually needs data. In particular, this makes it work better with <code><a href="../reference/req_perform_parallel.html">req_perform_parallel()</a></code> (<a href="https://github.com/r-lib/httr2/issues/487" class="external-link">#487</a>).</li>
<li>
<code><a href="../reference/req_cache.html">req_cache()</a></code> no longer fails if the <code>rds</code> files are somehow corrupted and now defaults the <code>debug</code> argument to the <code>httr2_cache_debug</code> option to make it easier to debug caching buried in other people’s code (<a href="https://github.com/r-lib/httr2/issues/486" class="external-link">#486</a>).</li>
<li>
<code><a href="../reference/req_oauth_password.html">req_oauth_password()</a></code> now only asks for your password once (<a href="https://github.com/r-lib/httr2/issues/498" class="external-link">#498</a>).</li>
<li>
<code><a href="../reference/req_perform_parallel.html">req_perform_parallel()</a></code> now works correctly with <code><a href="../reference/req_cache.html">req_cache()</a></code> (<a href="https://github.com/r-lib/httr2/issues/447" class="external-link">#447</a>) and now works when downloading 0 byte files (<a href="https://github.com/r-lib/httr2/issues/478" class="external-link">#478</a>)</li>
<li>
<code><a href="../reference/req_perform_stream.html">req_perform_stream()</a></code> no longer applies the <code>callback</code> to unsuccessful responses, instead creating a regular response. It also now sets <code><a href="../reference/last_response.html">last_request()</a></code> and <code><a href="../reference/last_response.html">last_response()</a></code> (<a href="https://github.com/r-lib/httr2/issues/479" class="external-link">#479</a>).</li>
<li>
<code><a href="../reference/req_url.html">req_url_query()</a></code> now allows you to opt out of escaping for multi-value parameters (<a href="https://github.com/r-lib/httr2/issues/404" class="external-link">#404</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.1" id="httr2-101">httr2 1.0.1<a class="anchor" aria-label="anchor" href="#httr2-101"></a></h2><p class="text-muted">CRAN release: 2024-04-01</p>
<ul><li><p><code><a href="../reference/req_perform_stream.html">req_perform_stream()</a></code> gains a <code>round = c("byte", "line")</code> argument to control how the stream is rounded (<a href="https://github.com/r-lib/httr2/issues/437" class="external-link">#437</a>).</p></li>
<li><p><code><a href="../reference/req_retry.html">req_retry()</a></code> gives a clearer error if <code>after</code> returns the wrong type of value (<a href="https://github.com/r-lib/httr2/issues/385" class="external-link">#385</a>).</p></li>
<li><p><code><a href="../reference/req_template.html">req_template()</a></code> now works when you have a bare <code>:</code> in a template that uses “uri” style (<a href="https://github.com/r-lib/httr2/issues/389" class="external-link">#389</a>).</p></li>
<li><p><code><a href="../reference/req_timeout.html">req_timeout()</a></code> now resets the value of <code>connecttimeout</code> set by curl. This ensures that you can use <code><a href="../reference/req_timeout.html">req_timeout()</a></code> to increase the connection timeout past 10s (<a href="https://github.com/r-lib/httr2/issues/395" class="external-link">#395</a>).</p></li>
<li><p><code><a href="../reference/url_parse.html">url_parse()</a></code> is considerably faster thanks to performance optimisations by and discussion with <a href="https://github.com/DyfanJones" class="external-link">@DyfanJones</a> (<a href="https://github.com/r-lib/httr2/issues/429" class="external-link">#429</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.0" id="httr2-100">httr2 1.0.0<a class="anchor" aria-label="anchor" href="#httr2-100"></a></h2><p class="text-muted">CRAN release: 2023-11-14</p>
<div class="section level3">
<h3 id="function-lifecycle-1-0-0">Function lifecycle<a class="anchor" aria-label="anchor" href="#function-lifecycle-1-0-0"></a></h3>
<ul><li><p><code>local_mock()</code> and <code>with_mock()</code> have been deprecated in favour of <code><a href="../reference/with_mocked_responses.html">local_mocked_responses()</a></code> and <code><a href="../reference/with_mocked_responses.html">with_mocked_responses()</a></code> (<a href="https://github.com/r-lib/httr2/issues/301" class="external-link">#301</a>).</p></li>
<li><p><code>multi_req_perform()</code> is deprecated in favour of <code><a href="../reference/req_perform_parallel.html">req_perform_parallel()</a></code>. <code>req_stream()</code> is deprecated in favour of <code><a href="../reference/req_perform_stream.html">req_perform_stream()</a></code> (<a href="https://github.com/r-lib/httr2/issues/314" class="external-link">#314</a>).</p></li>
<li><p><code><a href="../reference/req_oauth_auth_code.html">oauth_flow_auth_code()</a></code> deprecates <code>host_name</code> and <code>port</code> arguments in favour of using <code>redirect_uri</code>. It also deprecates <code>host_ip</code> since it seems unlikely that changing this is ever useful.</p></li>
<li><p><code><a href="../reference/oauth_flow_auth_code_url.html">oauth_flow_auth_code_listen()</a></code> now takes a single <code>redirect_uri</code> argument instead of separate <code>host_ip</code> and <code>port</code> arguments. This is a breaking change but I don’t expect anyone to call this function directly (which was confirmed by a GitHub search) so I made the change without deprecation.</p></li>
<li><p><code><a href="../reference/req_body.html">req_body_form()</a></code> and <code><a href="../reference/req_body.html">req_body_multipart()</a></code> now require data <code>...</code>; they no longer accept a single list for compatibility with the 0.1.0 API.</p></li>
</ul></div>
<div class="section level3">
<h3 id="multiple-requests-1-0-0">Multiple requests<a class="anchor" aria-label="anchor" href="#multiple-requests-1-0-0"></a></h3>
<ul><li><p>New <code><a href="../reference/req_perform_sequential.html">req_perform_sequential()</a></code> performs a known set of requests sequentially. It has an interface similar to <code><a href="../reference/req_perform_parallel.html">req_perform_parallel()</a></code> but with no limitations, and the cost of being slower (<a href="https://github.com/r-lib/httr2/issues/361" class="external-link">#361</a>).</p></li>
<li><p>New <code><a href="../reference/req_perform_iterative.html">req_perform_iterative()</a></code> performs multiple requests, where each request is derived from the previous response (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/r-lib/httr2/issues/8" class="external-link">#8</a>).</p></li>
<li><p><code><a href="../reference/req_perform_parallel.html">req_perform_parallel()</a></code> replaces <code>multi_req_perform()</code> to match the new naming scheme (<a href="https://github.com/r-lib/httr2/issues/314" class="external-link">#314</a>). It gains a <code>progress</code> argument.</p></li>
<li><p><code><a href="../reference/req_perform_iterative.html">req_perform_iterative()</a></code>, <code><a href="../reference/req_perform_parallel.html">req_perform_parallel()</a></code>, and <code><a href="../reference/req_perform_sequential.html">req_perform_sequential()</a></code> share a new error handling strategy. By default, errors will be bubbled up, but you can choose an alternative strategy with the <code>on_error</code> argument (<a href="https://github.com/r-lib/httr2/issues/372" class="external-link">#372</a>).</p></li>
<li><p>A new family of functions <code><a href="../reference/resps_successes.html">resps_successes()</a></code>, <code><a href="../reference/resps_successes.html">resps_failures()</a></code>, <code><a href="../reference/resps_successes.html">resps_requests()</a></code> and <code><a href="../reference/resps_successes.html">resps_data()</a></code> make it easier to work with lists of responses (<a href="https://github.com/r-lib/httr2/issues/357" class="external-link">#357</a>). Behind the scenes, these work because the request is now stored in the response (or error) object (<a href="https://github.com/r-lib/httr2/issues/357" class="external-link">#357</a>).</p></li>
<li><p><code><a href="../reference/resp_body_raw.html">resp_body_json()</a></code> and <code><a href="../reference/resp_body_raw.html">resp_body_xml()</a></code> now cache the parsed values so that you can use them repeatedly without worrying about the performance cost. This supports the design <code><a href="../reference/req_perform_iterative.html">req_perform_iterative()</a></code> by avoiding the need to carefully pass around a parsed object.</p></li>
</ul></div>
<div class="section level3">
<h3 id="oauth-features-1-0-0">OAuth features<a class="anchor" aria-label="anchor" href="#oauth-features-1-0-0"></a></h3>
<ul><li><p>A new <code>vignette("oauth")</code> gives many more details about how OAuth works and how to use it with httr2 (<a href="https://github.com/r-lib/httr2/issues/234" class="external-link">#234</a>), and the OAuth docs have been overhauled to make it more clear that you should use <code>req_oauth_*()</code>, not <code>oauth_*()</code> (<a href="https://github.com/r-lib/httr2/issues/330" class="external-link">#330</a>).</p></li>
<li><p>If you are using an OAuth token with a refresh token, and that refresh token has expired, then httr2 will now re-run the entire flow to get you a new token (<a href="https://github.com/r-lib/httr2/issues/349" class="external-link">#349</a>).</p></li>
<li><p>New <code><a href="../reference/oauth_cache_path.html">oauth_cache_path()</a></code> returns the path that httr2 uses for caching OAuth tokens. Additionally, you can now change the cache location by setting the <code>HTTR2_OAUTH_CACHE</code> env var. This is now more obvious to the user, because httr2 now informs the user whenever a token is cached.</p></li>
<li><p><code><a href="../reference/req_oauth_auth_code.html">oauth_flow_auth_code()</a></code> gains a <code>redirect_uri</code> argument rather than deriving this URL automatically from the <code>host_name</code> and <code>port</code> (<a href="https://github.com/r-lib/httr2/issues/248" class="external-link">#248</a>). It uses this argument to automatically choose which strategy to use to get the auth code, either launching a temporary web server or, new, allowing you to manually enter the details with the help of a custom JS/HTML page hosted elsewhere, or by copying and pasting the URL you’re redirected to (<a href="https://github.com/fh-mthomson" class="external-link">@fh-mthomson</a>, <a href="https://github.com/r-lib/httr2/issues/326" class="external-link">#326</a>). The temporary web server now also respects the path component of <code>redirect_uri</code>, if the API needs a specific path (<a href="https://github.com/r-lib/httr2/issues/149" class="external-link">#149</a>).</p></li>
<li><p>New <code><a href="../reference/oauth_token_cached.html">oauth_token_cached()</a></code> allows you to get an OAuth token while still taking advantage of httr2’s caching and auto-renewal features. For expert use only (<a href="https://github.com/r-lib/httr2/issues/328" class="external-link">#328</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="other-new-features-1-0-0">Other new features<a class="anchor" aria-label="anchor" href="#other-new-features-1-0-0"></a></h3>
<ul><li><p><a href="https://github.com/mgirlich" class="external-link">@mgirlich</a> is now a httr2 contributor in recognition of his many contributions.</p></li>
<li><p><code><a href="../reference/req_cache.html">req_cache()</a></code> gains <code>max_n</code>, <code>max_size</code>, and <code>max_age</code> arguments to automatically prune the cache. By default, the cache will stay under 1 GB (<a href="https://github.com/r-lib/httr2/issues/207" class="external-link">#207</a>).</p></li>
<li><p>New <code><a href="../reference/req_body.html">req_body_json_modify()</a></code> allows you to iteratively modify a JSON body of a request.</p></li>
<li><p>New <code><a href="../reference/req_cookie_preserve.html">req_cookie_preserve()</a></code> lets you use a file to share cookies across requests (<a href="https://github.com/r-lib/httr2/issues/223" class="external-link">#223</a>).</p></li>
<li><p>New <code><a href="../reference/req_progress.html">req_progress()</a></code> adds a progress bar to long downloads or uploads (<a href="https://github.com/r-lib/httr2/issues/20" class="external-link">#20</a>).</p></li>
<li><p>New <code><a href="../reference/resp_check_content_type.html">resp_check_content_type()</a></code> to check response content types (<a href="https://github.com/r-lib/httr2/issues/190" class="external-link">#190</a>). <code><a href="../reference/resp_body_raw.html">resp_body_json()</a></code> and friends give better errors if no <code>Content-Type</code> header is present in the response (<a href="https://github.com/r-lib/httr2/issues/284" class="external-link">#284</a>).</p></li>
<li><p>New <code><a href="../reference/resp_body_raw.html">resp_has_body()</a></code> returns a <code>TRUE</code> or <code>FALSE</code> depending on whether or not the response has a body (<a href="https://github.com/r-lib/httr2/issues/205" class="external-link">#205</a>).</p></li>
<li><p>New <code><a href="../reference/resp_url.html">resp_url()</a></code>, <code><a href="../reference/resp_url.html">resp_url_path()</a></code>, <code><a href="../reference/resp_url.html">resp_url_queries()</a></code> and <code><a href="../reference/resp_url.html">resp_url_query()</a></code> to extract various part of the response url (<a href="https://github.com/r-lib/httr2/issues/57" class="external-link">#57</a>).</p></li>
<li><p><code><a href="../reference/req_url.html">req_url_query()</a></code> gains a <code>.multi</code> parameter that controls what happens when you supply multiple values in a vector. The default will continue to error but you can use <code>.multi = "comma"</code> to separate with commas, <code>"pipe"</code> to separate with <code>|</code>, and <code>"explode"</code> to generate one parameter for each value (e.g. <code>?a=1&amp;a=2</code>) (<a href="https://github.com/r-lib/httr2/issues/350" class="external-link">#350</a>).</p></li>
<li><p>New <code><a href="../reference/secrets.html">secret_encrypt_file()</a></code> and <code><a href="../reference/secrets.html">secret_decrypt_file()</a></code> for encrypting and decrypting files (<a href="https://github.com/r-lib/httr2/issues/237" class="external-link">#237</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-1-0-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-1-0-0"></a></h3>
<ul><li><p>The httr2 examples now only run on R 4.2 and later so that we can use the base pipe and lambda syntax (<a href="https://github.com/r-lib/httr2/issues/345" class="external-link">#345</a>).</p></li>
<li><p>OAuth errors containing a url now correctly display that URL (instead of the string “uri”).</p></li>
<li><p><code><a href="../reference/curl_translate.html">curl_translate()</a></code> now uses the base pipe, and produces escapes with single quotes or raw strings in case double quotes can’t be used (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/r-lib/httr2/issues/264" class="external-link">#264</a>). It gains the argument <code>simplify_headers</code> that removes some common but unimportant headers, like <code>Sec-Fetch-Dest</code> or <code>sec-ch-ua-mobile</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/r-lib/httr2/issues/256" class="external-link">#256</a>). It also parses the query components of the url (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/r-lib/httr2/issues/259" class="external-link">#259</a>) and works with multiline commands from the clipboard (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/r-lib/httr2/issues/254" class="external-link">#254</a>).</p></li>
<li><p><code><a href="../reference/with_mocked_responses.html">local_mocked_responses()</a></code> and <code><a href="../reference/with_mocked_responses.html">with_mocked_responses()</a></code> now accept a list of responses which will be returned in sequence. They also now correctly trigger errors when the mocked response represents an HTTP failure (<a href="https://github.com/r-lib/httr2/issues/252" class="external-link">#252</a>).</p></li>
<li><p><code><a href="../reference/req_oauth_refresh.html">oauth_flow_refresh()</a></code> now only warns, not errors, if the <code>refresh_token</code> changes, making it a little easier to use in manual workflows (<a href="https://github.com/r-lib/httr2/issues/186" class="external-link">#186</a>).</p></li>
<li><p><code><a href="../reference/obfuscate.html">obfuscated()</a></code> values now display their original call when printed.</p></li>
<li><p><code><a href="../reference/req_body.html">req_body_json()</a></code> gains custom content <code>type</code> argument and respects custom content-type set in header (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/r-lib/httr2/issues/189" class="external-link">#189</a>).</p></li>
<li><p><code><a href="../reference/req_cache.html">req_cache()</a></code> now combine the headers of the new response with the headers of the cached response. In particular, this fixes <code>resp_body_json/xml/html()</code> on cached responses (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/r-lib/httr2/issues/277" class="external-link">#277</a>).</p></li>
<li><p><code><a href="../reference/req_perform.html">req_perform()</a></code> now throws error with class <code>httr2_failure/httr2_error</code> if the request fails, and that error now captures the curl error as the parent. If the request succeeds, but the response is an HTTP error, that error now also has super class <code>httr2_error</code>. This means that all errors thrown by httr2 now inherit from the <code>httr2_error</code> class. See new docs in <code>?req_error()</code> for more details.</p></li>
<li><p><code><a href="../reference/req_perform.html">req_perform()</a></code>’s progress bar can be suppressed by setting <code>options(httr2_progress = FALSE)</code> (<a href="https://github.com/r-lib/httr2/issues/251" class="external-link">#251</a>). Progress bars displayed while waiting for some time to pass now tell you why they’re waiting (<a href="https://github.com/r-lib/httr2/issues/206" class="external-link">#206</a>).</p></li>
<li><p><code><a href="../reference/req_oauth_bearer_jwt.html">req_oauth_bearer_jwt()</a></code> now includes the claim in the cache key (<a href="https://github.com/r-lib/httr2/issues/192" class="external-link">#192</a>).</p></li>
<li><p><code><a href="../reference/req_oauth_device.html">req_oauth_device()</a></code> now takes a <code>auth_url</code> parameter making it usable (<a href="https://github.com/r-lib/httr2/issues/331" class="external-link">#331</a>, <a href="https://github.com/taerwin" class="external-link">@taerwin</a>).</p></li>
<li><p><code><a href="../reference/req_url.html">req_url_query()</a></code> gains a <code>.multi</code> parameter that controls what happens when you supply multiple values in a vector. The default will continue to error but you can use <code>.multi = "comma"</code> to separate with commas, <code>"pipe"</code> to separate with <code>|</code>, and <code>"explode"</code> to generate one parameter for each value (e.g. <code>?a=1&amp;a=2</code>) (<a href="https://github.com/r-lib/httr2/issues/350" class="external-link">#350</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.3" id="httr2-023">httr2 0.2.3<a class="anchor" aria-label="anchor" href="#httr2-023"></a></h2><p class="text-muted">CRAN release: 2023-05-08</p>
<ul><li><p>New <code><a href="../reference/example_url.html">example_url()</a></code> to launch a local server, making tests and examples more robust.</p></li>
<li><p>New <code><a href="../reference/throttle_status.html">throttle_status()</a></code> to make it a little easier to verify what’s happening with throttling.</p></li>
<li><p><code><a href="../reference/req_oauth_refresh.html">req_oauth_refresh()</a></code> now respects the <code>refresh_token</code> for caching (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/r-lib/httr2/issues/178" class="external-link">#178</a>).</p></li>
<li><p><code><a href="../reference/req_perform.html">req_perform()</a></code> now always sleeps before a request, rather than after it. It also gains an <code>error_call</code> argument and communicates more clearly where the error occurred (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/r-lib/httr2/issues/187" class="external-link">#187</a>).</p></li>
<li><p><code><a href="../reference/req_url.html">req_url_path()</a></code> and <code><a href="../reference/req_url.html">req_url_path_append()</a></code> can now handle <code>NULL</code> or empty <code>...</code> and the elements of <code>...</code> can also have length &gt; 1 (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/r-lib/httr2/issues/177" class="external-link">#177</a>).</p></li>
<li><p><code>sys_sleep()</code> (used by <code><a href="../reference/req_retry.html">req_retry()</a></code> and <code><a href="../reference/req_throttle.html">req_throttle()</a></code>) gains a progress bar (<a href="https://github.com/r-lib/httr2/issues/202" class="external-link">#202</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.2" id="httr2-022">httr2 0.2.2<a class="anchor" aria-label="anchor" href="#httr2-022"></a></h2><p class="text-muted">CRAN release: 2022-09-25</p>
<ul><li><p><code><a href="../reference/curl_translate.html">curl_translate()</a></code> can now handle curl copied from Chrome developer tools (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/r-lib/httr2/issues/161" class="external-link">#161</a>).</p></li>
<li><p><code>req_oauth_*()</code> can now refresh OAuth tokens. One, two, or even more times! (<a href="https://github.com/jennybc" class="external-link">@jennybc</a>, <a href="https://github.com/r-lib/httr2/issues/166" class="external-link">#166</a>)</p></li>
<li><p><code><a href="../reference/req_oauth_device.html">req_oauth_device()</a></code> can now work in non-interactive environments, as intendend (<a href="https://github.com/flahn" class="external-link">@flahn</a>, <a href="https://github.com/r-lib/httr2/issues/170" class="external-link">#170</a>)</p></li>
<li><p><code><a href="../reference/req_oauth_refresh.html">req_oauth_refresh()</a></code> and <code><a href="../reference/req_oauth_refresh.html">oauth_flow_refresh()</a></code> now use the envvar <code>HTTR2_REFRESH_TOKEN</code>, not <code>HTTR_REFRESH_TOKEN</code> (<a href="https://github.com/jennybc" class="external-link">@jennybc</a>, <a href="https://github.com/r-lib/httr2/issues/169" class="external-link">#169</a>).</p></li>
<li><p><code><a href="../reference/req_proxy.html">req_proxy()</a></code> now uses the appropriate authentication option (<a href="https://github.com/jl5000" class="external-link">@jl5000</a>).</p></li>
<li><p><code><a href="../reference/req_url.html">req_url_query()</a></code> can now opt out of escaping with <code><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I()</a></code> (<a href="https://github.com/boshek" class="external-link">@boshek</a>, <a href="https://github.com/r-lib/httr2/issues/152" class="external-link">#152</a>).</p></li>
<li><p>Can now print responses where content type is the empty string (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/r-lib/httr2/issues/163" class="external-link">#163</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.1" id="httr2-021">httr2 0.2.1<a class="anchor" aria-label="anchor" href="#httr2-021"></a></h2><p class="text-muted">CRAN release: 2022-05-10</p>
<ul><li><p>“Wrapping APIs” is now an article, not a vignette.</p></li>
<li><p><code><a href="../reference/req_template.html">req_template()</a></code> now appends the path instead of replacing it (<a href="https://github.com/jchrom" class="external-link">@jchrom</a>, <a href="https://github.com/r-lib/httr2/issues/133" class="external-link">#133</a>)</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="httr2-020">httr2 0.2.0<a class="anchor" aria-label="anchor" href="#httr2-020"></a></h2><p class="text-muted">CRAN release: 2022-04-28</p>
<div class="section level3">
<h3 id="new-features-0-2-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-2-0"></a></h3>
<ul><li><p><code><a href="../reference/req_body.html">req_body_form()</a></code>, <code><a href="../reference/req_body.html">req_body_multipart()</a></code>, and <code><a href="../reference/req_url.html">req_url_query()</a></code> now support multiple arguments with the same name (<a href="https://github.com/r-lib/httr2/issues/97" class="external-link">#97</a>, <a href="https://github.com/r-lib/httr2/issues/107" class="external-link">#107</a>).</p></li>
<li><p><code><a href="../reference/req_body.html">req_body_form()</a></code>, <code><a href="../reference/req_body.html">req_body_multipart()</a></code>, now match the interface of <code><a href="../reference/req_url.html">req_url_query()</a></code>, taking name-value pairs in <code>...</code>. Supplying a single <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> is now deprecated and will be removed in a future version.</p></li>
<li><p><code><a href="../reference/req_body.html">req_body_json()</a></code> now overrides the existing JSON body, rather than attempting to merge with the previous value (<a href="https://github.com/r-lib/httr2/issues/95" class="external-link">#95</a>, <a href="https://github.com/r-lib/httr2/issues/115" class="external-link">#115</a>).</p></li>
<li><p>Implement <code><a href="../reference/req_proxy.html">req_proxy()</a></code> (owenjonesuob, <a href="https://github.com/r-lib/httr2/issues/77" class="external-link">#77</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-0-2-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-0-2-0"></a></h3>
<ul><li><p><code>httr_path</code> class renamed to <code>httr2_path</code> to correctly match package name (<a href="https://github.com/r-lib/httr2/issues/99" class="external-link">#99</a>).</p></li>
<li><p><code><a href="../reference/req_oauth_device.html">oauth_flow_device()</a></code> gains PKCE support (<a href="https://github.com/flahn" class="external-link">@flahn</a>, <a href="https://github.com/r-lib/httr2/issues/92" class="external-link">#92</a>), and the interactive flow is a little more user friendly.</p></li>
<li><p><code><a href="../reference/req_error.html">req_error()</a></code> can now correct force successful HTTP statuses to fail (<a href="https://github.com/r-lib/httr2/issues/98" class="external-link">#98</a>).</p></li>
<li><p><code><a href="../reference/req_headers.html">req_headers()</a></code> will now override <code>Content-Type</code> set by <code>req_body_*()</code> (<a href="https://github.com/r-lib/httr2/issues/116" class="external-link">#116</a>).</p></li>
<li><p><code><a href="../reference/req_throttle.html">req_throttle()</a></code> correctly sets throttle rate (<a href="https://github.com/jchrom" class="external-link">@jchrom</a>, <a href="https://github.com/r-lib/httr2/issues/101" class="external-link">#101</a>).</p></li>
<li><p><code><a href="../reference/req_url.html">req_url_query()</a></code> never uses scientific notation for queries (<a href="https://github.com/r-lib/httr2/issues/93" class="external-link">#93</a>).</p></li>
<li><p><code><a href="../reference/req_perform.html">req_perform()</a></code> now respects <code><a href="https://httr.r-lib.org/reference/with_config.html" class="external-link">httr::with_verbose()</a></code> (<a href="https://github.com/r-lib/httr2/issues/85" class="external-link">#85</a>).</p></li>
<li><p><code><a href="../reference/response.html">response()</a></code> now defaults <code>body</code> to <code>raw(0)</code> for consistency with real responses (<a href="https://github.com/r-lib/httr2/issues/100" class="external-link">#100</a>).</p></li>
<li><p><code>req_stream()</code> no longer throws an error for non 200 http status codes (<a href="https://github.com/DMerch" class="external-link">@DMerch</a>, <a href="https://github.com/r-lib/httr2/issues/137" class="external-link">#137</a>)</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="httr2-011">httr2 0.1.1<a class="anchor" aria-label="anchor" href="#httr2-011"></a></h2><p class="text-muted">CRAN release: 2021-09-28</p>
<ul><li><p>Fix R CMD check failures on CRAN</p></li>
<li><p>Added a <code>NEWS.md</code> file to track changes to the package.</p></li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

